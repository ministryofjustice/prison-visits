- content_for :header do
  = t("deferred.process_a_visit_request")

- if prison_data(booked_visit)['canned_responses']

  .people

    %dl.labels
      %dt= t("deferred.prisoner")
      %dd= booked_visit.prisoner.full_name
      
      %dt= t("deferred.number")
      %dd= booked_visit.prisoner.number

      %dt= t("deferred.date_of_birth")
      %dd= format_date_nomis booked_visit.prisoner.date_of_birth

    %hr

    - booked_visit.visitors.each_with_index do |visitor, index|
      %dl.labels
        %dt= t("deferred.visitor_a", a: (index + 1))
        %dd= visitor.full_name

        %dt= t("deferred.age")
        %dd= visitor.age

        %dt= t("deferred.date_of_birth")
        %dd= format_date_nomis visitor.date_of_birth
        
        - if visitor.email
          %dt= t("deferred.email_1")
          %dd= visitor.email
        
        - if visitor.phone
          %dt= t("deferred.phone")
          %dd= visitor.phone

  .processing-form
    = render 'canned_responses'

- else
  = render 'open_responses'
